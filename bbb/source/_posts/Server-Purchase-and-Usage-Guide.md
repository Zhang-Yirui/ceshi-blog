---
title: 服务器选购与使用指南
date: 2025-04-10 11:48:59
mathjax: true
tags:
---

# 服务器选购

|  业务类型  |        典型配置参考        |    核心关注点    |
| :--------: | :------------------------: | :--------------: |
|  企业官网  |    2核4G/40G SSD/5M带宽    | 稳定性、SEO优化  |
|  电商平台  | 4核8G/100G SSD/10M带宽+CDN | 高并发、支付安全 |
| 小程序后端 |   2核4G/80G SSD/弹性带宽   |   API响应速度    |

对于大多数中小型公司来说，各大云厂商推出的轻量应用服务器已经能够满足大多数使用场景需求，如果业务量较大，也可以按照下面的方式去做一个简单的参考，根据业务需求自定义选购云服务器**（下述部分仅作参考）**：

## **1、CPU/内存动态配比表**

```C
Web服务器 → 1:2 (如2核配4GB)  
数据库服务器 → 1:4 (如4核配16GB)    
缓存服务器 → 1:1 (内存密集型)
```

## **2、存储选型**

```python
if 随机读写>70% → NVMe SSD（如MySQL）  
elif 顺序读写>50% → SATA SSD（如日志存储）  
else → HDD机械盘（备份/归档）
```

就目前来讲现阶段，云厂商的硬盘种类较多（下图以腾讯云为例），实际使用过程中建议根据厂商文档和业务需求进行选择配置即可

### **云硬盘类型简介**

- **性能云硬盘**

  高性能云硬盘是腾讯云推出的混合型存储类型，通过`Cache`机制提供接近固态存储的高性能存储能力。高性能云硬盘适用于高数据可靠性要求、普通中度性能要求的Web/App服务器、业务逻辑处理、中小型建站等中小型应用场景。

- **通用型SSD云硬盘**

  通用型SSD云硬盘是腾讯云推出的入门级全闪类型块存储产品，它具有高性价比的优势。适用于高数据可靠性要求、中等性能要求的Web/App服务器、业务逻辑处理、KV服务、基础数据库服务等中型应用场景。

- **SSD云硬盘**

  SSD云硬盘是腾讯云基于`NVMe SSD`存储介质提供的全闪型存储类型，提供低时延、较高随机IOPS和吞吐量的I/O能力。SSD云硬盘适用于对I/O性能有较高要求的场景。

- **增强型SSD云硬盘**

  增强型SSD云硬盘由腾讯云基于新一代存储引擎设计，基于全`NVMe SSD`存储介质和最新网络基础设施提供的产品类型，提供低时延、高随机IOPS、高吞吐量的I/O 能力。增强型SSD 云硬盘适用于对大型数据库、NoSQL等对时延要求很高的I/O 密集型场景。增强型SSD云硬盘独特性地支持性能与容量单独配置，您可以根据业务的实际情况配置需要的存储容量及存储性能。

- **极速型SSD云硬盘**

  极速型SSD云硬盘由腾讯云基于最新自研高性能分布式存储引擎，搭配高速网络基础设施及最新一代存储硬件，长期稳定地提供超低时延的可靠性能。非常适用于需要极低延迟的IO密集型和吞吐量密集型工作负载，例如大型`MySQL`、`HBase`和`Cassandra`等数据库业务，`etcd`和`rocksdb`等键值存储，`ElasticSearch`等日志检索业务，视频处理、直播等实时高带宽型业务。在关键交易工作负载、核心数据库业务、大型OLTP业务、视频处理等场景下表现优秀。极速型SSD云硬盘独特性地支持性能与容量单独配置，您可以根据业务的实际情况配置需要的存储容量及存储性能。

## **3、带宽选配**

$$
带宽(Mbps) = \frac{页面大小(KB) × PV × 冗余系数}{86400 × 压缩率}
$$

```C
假设2MB页面/日10万PV → (2048×100000×1.5)/(86400×0.7) ≈ 51Mbps → 建议10M带宽+CDN加速
```

------

# Linux初始化安全配置

当我们购买一台Linux服务器后，我们至少会知道以下几项信息：

- 服务器公网IP：通常在服务器列表或详情页面
- 用户名：Linux一般为root
- 密码：如果你没有设置，一般会通过邮件发送给你，或通过厂商控制台进行重置

知道上述信息以后，我们就可以通过SSH工具（如堡塔多机管理）安装宝塔面板，安装完成后，我们即可开始进行基础的安全配置。

## 1、**修改SSH默认端口**

**SSH** 默认端口 `22` 是公开信息，攻击者会通过自动化工具（如僵尸网络）大规模扫描互联网上的 `22` 端口，尝试暴力破解弱密码或利用已知漏洞获取服务器控制权，虽然对于扫描器而言没办法完全阻止暴力破解，但可以过滤掉绝大部分扫描和定向暴破，在宝塔面板中，我们可以通过`安全→SSH管理→基础设置`来修改`SSH`端口，例如修改为`35467`这样的高位端口。

{% note warning %} P.S.：修改后记得在云厂商安全组或防火墙放通对应的`SSH`端口 {% endnote %}

## 2、**SSH密钥登录**

大部分主机失陷都是因为**SSH**弱密码遭到爆破导致，比如`1234567890`，`admin@123`，`woaini520`，`woshishui`等等，在`kali`系统的`/usr/share/wordlists/`目录下存放着一个字典，里面大概包含了**1400万**个弱口令密码，所以，使用密码显然不是一个安全的方式，而密钥登录通过非对称加密实现，安全性远高于密码，能有效防御暴力破解和中间人攻击。因此，服务器运维、生产环境通常推荐密钥登录，在宝塔面板中，我们可以通过``，关闭密码登录，启用密钥登录。启用密钥登录需要下载密钥留作登录使用，登录时验证方式选择密钥，并选择对应的密钥文件即可。

## 3、**Fail2ban防爆破**

`Fail2ban` 防御暴力破解（防爆破）是服务器安全中的一种有效补充措施，它可以通过动态封禁恶意 `IP` 地址来阻止攻击者的持续尝试，能有效避免因暴力破解导致的主机或服务失陷的问题，我们可以直接在`安全→SSH管理→基础设置`页面开启`SSH安全防护`。

## 4、**防火墙或安全组**

多数厂商提供的服务器都支持配置安全组或防火墙，建议您通过安全组或防火墙封禁不必要的端口，甚至可以在业务稳定运行后封禁SSH及面板端口，以确保较高的安全性。以企业官网为例，通常仅需要放行80/443端口提供给用户访问即可，其他不必要的端口如`3306`、`888`、`6379`等通常无需对外暴露，避免徒增暴露面导致主机服务失陷。如您的服务器厂商没有提供类似于安全组或防火墙的功能，您也可通过宝塔面板安全页面管理防火墙，删除不必要的端口规则。

```mermaid
  graph LR;
      修改SSH默认端口-->SSH密钥登录;
      SSH密钥登录-->Fail2ban防爆破;
      Fail2ban防爆破-->防火墙或安全组;
```